const _0x1f2a=['prefix','4002636YvTofk','botName','true','DEFAULT_PREFIX','DEFAULT_BOT_NAME','2798888zZpOfY','findOneAndUpdate','readCmd','7733400MIdmDS','2877048fTWhXw','autoRead','Settings','293931VpWhmD','create','6964890WfJAdN','DEFAULT_OWNER_NAME','autoVoice','ownerName','mongodb+srv://Zanta-MD:Akashkavindu12345@cluster0.y7xsqsi.mongodb.net/?appName=Cluster0','false','10630800bYqVjF','model','5792040nBfLpC','alwaysOnline','toObject','findOne','autoTyping','connect','autoStatusSeen','✅\x20MongoDB\x20Connected!','1162400eCscvG'];const _0x2b1e=function(_0x39f50f,_0x1f2a34){_0x39f50f=_0x39f50f-0x9e;let _0x2b1e68=_0x1f2a[_0x39f50f];return _0x2b1e68;};(function(_0x160088,_0x40959d){const _0x534063=_0x2b1e;while(!![]){try{const _0x2b6348=-parseInt(_0x534063(0xb5))+-parseInt(_0x534063(0x9f))+parseInt(_0x534063(0xa1))*-parseInt(_0x534063(0xa9))+parseInt(_0x534063(0xa6))+-parseInt(_0x534063(0xb2))*parseInt(_0x534063(0xab))+parseInt(_0x534063(0x9e))+parseInt(_0x534063(0xae))*parseInt(_0x534063(0xa2));if(_0x2b6348===_0x40959d)break;else _0x160088['push'](_0x160088['shift']());}catch(_0x4466b0){_0x160088['push'](_0x160088['shift']());}}}(_0x1f2a,0x99539));const mongoose=require('mongoose'),config=require('../config'),MONGO_URI=_0x2b1e(0xb1),OWNER_KEY=config['OWNER_NUMBER'],SettingsSchema=new mongoose['Schema']({'id':{'type':String,'default':OWNER_KEY,'unique':!![]},'botName':{'type':String,'default':config[_0x2b1e(0xa3)]},'ownerName':{'type':String,'default':config[_0x2b1e(0xad)]},'prefix':{'type':String,'default':config[_0x2b1e(0xa2)]},'autoRead':{'type':String,'default':_0x2b1e(0xb2)},'autoTyping':{'type':String,'default':_0x2b1e(0xb2)},'autoStatusSeen':{'type':String,'default':_0x2b1e(0xa1)},'alwaysOnline':{'type':String,'default':_0x2b1e(0xb2)},'readCmd':{'type':String,'default':_0x2b1e(0xb2)},'autoVoice':{'type':String,'default':_0x2b1e(0xb2)}}),Settings=mongoose[_0x2b1e(0xb4)](_0x2b1e(0xaa),SettingsSchema);let isConnected=![];async function connectDB(){const _0x50751a=_0x2b1e;if(isConnected)return;try{await mongoose[_0x50751a(0xb8)](MONGO_URI,{'useNewUrlParser':!![],'useUnifiedTopology':!![]}),isConnected=!![],console['log'](_0x50751a(0xba));}catch(_0x33e8ca){console['error']('❌\x20MongoDB\x20Error:',_0x33e8ca);}}async function getBotSettings(){const _0x16999a=_0x2b1e,_0x450f3b={'botName':config[_0x16999a(0xa3)],'ownerName':config[_0x16999a(0xad)],'prefix':config[_0x16999a(0xa2)],'autoRead':_0x16999a(0xb2),'autoTyping':_0x16999a(0xb2),'autoStatusSeen':_0x16999a(0xa1),'alwaysOnline':_0x16999a(0xb2),'readCmd':_0x16999a(0xb2),'autoVoice':_0x16999a(0xb2)};if(!OWNER_KEY)return _0x450f3b;try{let _0x5c721c=await Settings[_0x16999a(0xb6)]({'id':OWNER_KEY});return!_0x5c721c?(_0x5c721c=await Settings[_0x16999a(0xac)]({'id':OWNER_KEY,..._0x450f3b}),console['log']('[DB]\x20Created\x20settings\x20profile\x20for:\x20'+OWNER_KEY)):null,_0x5c721c[_0x16999a(0xb5)]();}catch(_0x391e5e){return console['error']('[DB]\x20Fetch\x20Error:',_0x391e5e),_0x450f3b;}}async function updateSetting(_0x35006b,_0x138982){const _0x4d16ef=_0x2b1e;if(!OWNER_KEY)return![];try{const _0x1034c4=await Settings[_0x4d16ef(0xa5)]({'id':OWNER_KEY},{'$set':{[_0x35006b]:_0x138982}},{'new':!![],'upsert':!![]});return!!_0x1034c4;}catch(_0x2287f3){return console['error']('[DB]\x20Update\x20Error\x20('+_0x35006b+'):',_0x2287f3),![];}}module.exports={'connectDB':connectDB,'getBotSettings':getBotSettings,'updateSetting':updateSetting};
